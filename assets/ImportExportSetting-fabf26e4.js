/* empty css             */import{u as A}from"./baseSetting-c3e2ab97.js";/* empty css                   */import{D as g,_ as F,F as L,G as U,H as k,o as O,c as B,b as l,a as u,w as p,q as S,f as T,t as C,I as M,A as I,d as y}from"./index-a54b0e07.js";var j={exports:{}};(function(f,m){(function(_,i){i()})(g,function(){function _(e,t){return typeof t>"u"?t={autoBom:!1}:typeof t!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function i(e,t,a){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){d(o.response,t,a)},o.onerror=function(){console.error("could not download file")},o.send()}function v(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return 200<=t.status&&299>=t.status}function r(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var n=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof g=="object"&&g.global===g?g:void 0,c=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=n.saveAs||(typeof window!="object"||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(e,t,a){var o=n.URL||n.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin===location.origin?r(s):v(s.href)?i(e,t,a):r(s,s.target="_blank")):(s.href=o.createObjectURL(e),setTimeout(function(){o.revokeObjectURL(s.href)},4e4),setTimeout(function(){r(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,a){if(t=t||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(_(e,a),t);else if(v(e))i(e,t,a);else{var o=document.createElement("a");o.href=e,o.target="_blank",setTimeout(function(){r(o)})}}:function(e,t,a,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof e=="string")return i(e,t,a);var s=e.type==="application/octet-stream",h=/constructor/i.test(n.HTMLElement)||n.safari,b=/CriOS\/[\d]+/.test(navigator.userAgent);if((b||s&&h||c)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var w=x.result;w=b?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=w:location=w,o=null},x.readAsDataURL(e)}else{var R=n.URL||n.webkitURL,E=R.createObjectURL(e);o?o.location=E:location.href=E,o=null,setTimeout(function(){R.revokeObjectURL(E)},4e4)}});n.saveAs=d.saveAs=d,f.exports=d})})(j);var J=j.exports;const D={name:"ImportExportSetting",setup(){const f=A(),{searchEngines:m,bannerImg:_,links:i,numOfRow:v,enterAnimation:r}=L(f);let n=U([]);const c=k(()=>JSON.stringify({searchEngines:m,bannerImg:_,links:i,numOfRow:v,enterAnimation:r}));return{configJson:c,exportConfig:()=>{let a=new Blob([c.value],{type:"text/plain;charset=utf-8"});J.saveAs(a,"homepage_config.json")},onUpload:()=>{let a=new FileReader;a.readAsText(n.value[0].raw),a.onload=o=>{let s=o.target.result;try{let h=JSON.parse(s);f.dispatch("checkAndChangeConfig",h),window.localStorage.setItem("config",h),S.success("配置应用完成")}catch{S.error("上传的配置文件有错误，请使用手动配置")}n.value=[]}},myFileList:n,loadJsonFromFile:(a,o)=>{n.value=o}}}},H={style:{width:"100%"}},V={style:{height:"20px"}},q={style:{height:"60px"}},N=l("div",{style:{height:"20px"}},null,-1),G=l("i",{class:"el-icon-upload"},null,-1),X=l("div",{class:"el-upload__text"},[y("将文件拖到此处，或"),l("em",null,"点击上传")],-1),z=l("div",{class:"el-upload__tip"},"只能上传 .json 文件",-1),K={style:{height:"60px"}},P=l("div",{style:{height:"20px"}},null,-1);function W(f,m,_,i,v,r){const n=T,c=C,d=M,e=I;return O(),B("div",H,[l("div",V,[u(n,null,{default:p(()=>[y("导出配置文件")]),_:1})]),u(c,{type:"primary",icon:"el-icon-download",onClick:i.exportConfig},{default:p(()=>[y("导出")]),_:1},8,["onClick"]),l("div",q,[N,u(n,null,{default:p(()=>[y("导入配置文件")]),_:1})]),u(d,{action:"",class:"upload-demo",drag:"",accept:".json","http-request":i.onUpload,limit:1,"file-list":i.myFileList,"on-change":i.loadJsonFromFile,multiple:""},{tip:p(()=>[z]),default:p(()=>[G,X]),_:1},8,["http-request","file-list","on-change"]),l("div",K,[P,u(n,null,{default:p(()=>[y("配置信息")]),_:1})]),u(e,{type:"textarea",autosize:{minRows:2},modelValue:i.configJson,"onUpdate:modelValue":m[0]||(m[0]=t=>i.configJson=t),style:{width:"70%"}},null,8,["modelValue"])])}const ee=F(D,[["render",W]]);export{ee as default};
