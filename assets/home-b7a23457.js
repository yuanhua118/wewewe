/* empty css             */import{M as P,_ as R,d as y}from"./index-b7f7e072.js";/* empty css                  */import{_ as j}from"./Menu-df2e0bb2.js";import{d as q,u as F,J as k,s as N,M as H,N as S,o as h,c as w,f as _,t as l,w as n,e as C,a as s,O as $,P as Q,Q as G,R as E,v as W,S as X,T as Y,U as Z,V as ee,_ as te}from"./index-36069e73.js";import"./baseSetting-562f4030.js";import"./base-32b23c0f.js";/* empty css                     */const ae={class:"container"},oe={class:"card-header"},le=["onClick"],ne=["src"],se=["data-url"],re=["onClick"],ce=q({__name:"home",setup(ie){const V=F();let u=k(!1),o=N(P());H(()=>{o=o.map(e=>{var t;return e.activeName=(t=e.children[0])==null?void 0:t.label,e})}),console.log("=======",o);let b=k(JSON.stringify(o)),g=b.value;S(o,(e,t)=>{let a=JSON.stringify(e);g!==a&&(b.value=a,g=a,localStorage.setItem("customBox",a))}),S(b,(e,t)=>{try{if(g!==e){let a=JSON.parse(e);o.splice(0,o.length),o.push(...a)}}catch{W.error({content:"JSON配置解析失败",showIcon:!0})}});const M=e=>{let t=e&&`${e}`.split("_"),a=o[Number(t[0])];const c=a==null?void 0:a.children[Number(t[1])];a.activeName=c.label,console.log("select",a)},T=e=>{let t=/^http(s)?:\/\/(.*?)\//.exec(e);return t&&t.length>=2?t[2]:""};let r=N({visible:!1,name:"",url:"",type:3,t:0,i:0,j:0});const A=(e,t,a,c)=>{console.log("t, i, j, url",e,t,a,c);const f=V.resolve({path:"/detail",query:{url:c}}).href;window.open(f,"_blank")},B=(e,t)=>{r.type=2;let a=o[e].categories;t<a.length?r.name=a[t].name:r.name="",r.t=e,r.i=t,r.visible=!0},U=(e,t)=>{o[e].categories.splice(t,1)},J=(e,t,a)=>{o[e].categories[t].links.splice(a,1)},O=e=>{B(e,o[e].categories.length)},D=e=>{let t=e.split("_");U(t[0],t[1])};return(e,t)=>{const a=R,c=j,f=X,I=Y,z=Z,K=ee;return h(),w("div",ae,[_(a,{class:"search-container"}),_(c,{datas:l(o),onSelect:M},null,8,["datas"]),_(l(y),{list:l(o),handle:".category-drag-handle",animation:100,draggable:".tab",class:"draggable",group:"tabs",itemKey:"index"},{item:n(({element:i,index:m})=>[(h(),C(K,{key:m,class:"tab",shadow:"hover",style:{width:"100%","margin-bottom":"20px","box-sizing":"border-box"},id:`${i.label}`,ref:`${i.label}`,hoverable:""},{header:n(()=>[s("div",oe,[s("span",null,$(i.label),1)])]),default:n(()=>[_(z,{type:"border-card","tab-position":"top",editable:l(u),"show-add-button":l(u),modelValue:i.activeName,"onUpdate:modelValue":d=>i.activeName=d,onAdd:d=>O(m),stretch:!1,onDelete:D},{default:n(()=>[(h(!0),w(Q,null,G(i.children,(d,v)=>(h(),C(I,{key:`${m}_${v}`,label:d.label,name:d.label},{default:n(()=>[_(l(y),{tag:"ul",list:d.children,class:"list-group",animation:100,draggable:".link-li",group:"links",itemKey:"i"},{item:n(({element:p,index:x})=>[s("div",{class:E(["link-chip",{"link-li":!0,"link-li-editable":l(u)}]),onClick:L=>A(m,v,x,p.url)},[s("img",{class:"link-chip-image",src:"https://0x3.com/icon?host="+T(p.url)},null,8,ne),_(f,{content:p.label},{default:n(()=>[s("a",{class:"link-a","data-url":p.url},$(p.label),9,se)]),_:2},1032,["content"]),s("div",{class:E({"link-chip-btn":!0,hidden:!l(u)})},[s("i",{class:"iconfont cursor-pointer icon-chacha",onClick:L=>J(m,v,x)},null,8,re)],2)],10,le)]),_:2},1032,["list"])]),_:2},1032,["label","name"]))),128))]),_:2},1032,["editable","show-add-button","modelValue","onUpdate:modelValue","onAdd"])]),_:2},1032,["id"]))]),_:1},8,["list"])])}}});const fe=te(ce,[["__scopeId","data-v-b582a43f"]]);export{fe as default};
